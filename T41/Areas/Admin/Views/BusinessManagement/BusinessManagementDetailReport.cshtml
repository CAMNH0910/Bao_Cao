@{
//  Layout = null;
}

<!-- daterange picker -->
<link rel="stylesheet" href="/Areas/Admin/Content/bower_components/bootstrap-daterangepicker/daterangepicker.css">
<link rel="stylesheet" href="~/Areas/Admin/Content/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.css">
<link rel="stylesheet" href="/Areas/Admin/Content/bower_components/font-awesome/css/font-awesome.min.css">
@*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">*@


<!-- bootstrap datepicker -->
@*<link rel="stylesheet" href="~/Content/plugins/iCheck/all.css">*@
<!-- Bootstrap Color Picker -->
@*<link rel="stylesheet" href="~/Content/bower_components/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css">*@

<title>Báo cáo chi tiết theo khách hàng</title>
<section class="content">
    <div class="box box-default">
        <div class="box-header with-border">
            <h3 class="box-title">Báo cáo chi tiết theo khách hàng</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Từ Ngày </label>
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input class="form-control pull-right" id="fromdate" type="text" data-date-format="dd/mm/yyyy">
                        </div>
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Mã Nhân Viên Kinh Doanh</label>
                        <select class="form-control select2" style="width: 100%;" id="manvkinhdoanh">
                            <option selected="selected" value="0">Tất cả</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Đến Ngày</label>
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input class="form-control pull-right" id="todate" type="text" data-date-format="dd/mm/yyyy">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Bưu Cục </label>
                        <select class="form-control select2" style="width: 100%;" id="buucuc">
                            <option selected="selected" value="0">Tất cả</option>
                        </select>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Dịch Vụ</label>
                        <select class="form-control select2" style="width: 100%;" id="service">
                            <option selected="selected" value="10">Tất Cả</option>
                            <option value="0">EMS Thường</option>
                            <option value="1">COD</option>
                            <option value="2">Hỏa Tốc</option>
                            <option value="3">PT9</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Mã Khách Hàng</label>
                        <select class="form-control select2" style="width: 100%;" id="makh">
                            <option selected="selected" value="0">Tất cả</option>
                        </select>
                    </div>
                </div>
                
                <!-- /.col -->
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <button type="button" class="btn btn-default btn-lrg ajax" id="btnreport">Hiển Thị</button>
                </div>
                <div class="col-md-4">
                </div>
                <div class="col-md-4">

                </div>
            </div>
            <div class="box-header">
                <h3 class="box-title">Báo Cáo Tổng Hợp SLDT Theo Khách Hàng </h3>
            </div>
            <div style="overflow-x:auto;">
                <table id="example1" class="table table-bordered table-hover">
                    <thead>
                        <tr class="bg-light-blue color-palette">
                            <th class="text-center">STT</th>
                            <th class="text-center">Ngày HĐ</th>
                            <th class="text-center">Mã Khách Hàng</th>
                            <th class="text-center">Tên Khách Hàng</th>
                            <th class="text-center">Mã Bưu Cục</th>
                            <th class="text-center">Tổng Số Bưu Gửi</th>
                            <th class="text-center">Tổng Khối Lượng QĐ(g)</th>
                            <th class="text-center">Tổng Cước Chính(đ)</th>
                            <th class="text-center">Tổng Cước Dịch Vụ(đ)</th>
                            <th class="text-center">Tổng Cước COD(đ)</th>
                            <th class="text-center">VAT(đ)</th>
                            <th class="text-center">Tổng Cước E1(đ)</th>
                            <th class="text-center">Chiết Khấu</th>
                            <th class="text-center">Trích Thưởng</th>
                            <th class="text-center">Tổng Nợ(đ)</th>
                        </tr>
                    </thead>
                    <tbody id="listbusinessmanagement"></tbody>
                </table>
            </div>
            <div class="loading-element">
                <i class="fa fa-spinner fa-spin"></i>
                Vui lòng chờ giây lát...
            </div>
            <div class="row">
                <div id="page-selection" class="col-sm-12 text-center">
                </div>
            </div>
            

        </div>
    </div>


    <!-- /.box-body -->





</section>

<script type="text/javascript">
    $(document).ready(function () {
        $("#fromdate").datepicker({
            dateFormat: "dd/mm/yyyy"
        }).datepicker("setDate", "0");

        $("#todate").datepicker({
            dateFormat: "dd/mm/yyyy"
        }).datepicker("setDate", "0");
    });

    $(document).ready(function () {
        $('.loading-element').hide();
    });

    $("#btnreport").click(function () {
        $("#listbusinessmanagement tr").remove();
        detail_user_search(1);
    });


    //Phần JS gọi đến dữ liệu của chi tiết người dùng
    function detail_user_search(p) {
        
        $.ajax({
            url: '@Url.Action("ListDetailedBusinessManagementReport", "BusinessManagement")',
            beforeSend: function () {
                $('.loading-element').show();
            },
            method: 'GET',
            dataType: 'html',
            data: {
                page: p,
            },
            success: function (result) {
                $('#listbusinessmanagement').html(result);
                $('.loading-element').hide();
                if (p == 1) refreshPaging();
            }
        })
    }

    //Phần Phân Trang
    function refreshPaging() {
        $('#page-selection').bootpag({
            total: $('#total_page').val(),
            maxVisible: 10,
        }).on("page", function (event, /* page number here */ num) {
            detail_user_search(num);
            $("#listbusinessmanagement tr").remove();
        });
    }

</script>


